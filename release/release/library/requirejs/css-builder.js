define(["require","./normalize"],function(e,t){function n(e){if(v.optimizeCss=="none")return e;if(typeof process!="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){try{var t=require.nodeRequire("csso")}catch(n){return console.log('Compression module not installed. Use "npm install csso -g" to enable.'),e}var r=e.length;try{if(typeof t.minify=="function"){var i=t.minify(e);typeof i=="string"?e=i:typeof i=="object"&&(e=i.css)}else e=t.justDoIt(e)}catch(n){return console.log("Compression failed due to a CSS syntax error."),e}return console.log("Compressed CSS output to "+Math.round(e.length/r*100)+"%."),e}return console.log("Compression not supported outside of nodejs environments."),e}function r(e){if(typeof process!="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var t=require.nodeRequire("fs"),n=t.readFileSync(e,"utf8");return n.indexOf("ï»¿")===0?n.substring(1):n}var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),i=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),s,o;try{s=new java.lang.StringBuffer,o=i.readLine(),o&&o.length()&&o.charAt(0)===65279&&(o=o.substring(1)),s.append(o);while((o=i.readLine())!==null)s.append(r).append(o);return String(s.toString())}finally{i.close()}}function i(e,t){if(typeof process!="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var n=require.nodeRequire("fs");n.writeFileSync(e,t,"utf8")}else{var r=new java.lang.String(t),i=new java.io.BufferedWriter(new java.io.OutputStreamWriter(new java.io.FileOutputStream(e),"utf-8"));try{i.write(r,0,r.length()),i.flush()}finally{i.close()}}}function s(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var o={},u=!!process.platform.match(/^win/),a=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,f=/^([^\:\/]+:\/)?\//,l="define('@writecss', function() {return function writeCss(c) {var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));};});",c,h=e.toUrl("base_url").split("/");h[h.length-1]="";var p=h.join("/"),d=0,v,m=!0,g=[],y={};return o.load=function(e,n,i,s){v=v||s,c||(c=path.resolve(v.dir||path.dirname(v.out),v.siteRoot||".")+"/",u&&(c=c.replace(/\\/g,"/")));if(e.match(f))return i();var o=n.toUrl(e+".css");u&&(o=o.replace(/\\/g,"/"));var a=o;if(a.indexOf(p)<0){var l=n.toUrl(v.appDir);u&&(l=l.replace(/\\/g,"/")),a.indexOf(l)==0&&(a=c+a.substring(l.length))}y[e]=t(r(o),a,c),i()},o.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)},o.write=function(e,t,r,i){var o;if(t.match(f))return;g.push(y[t]),global._requirejsCssData?global._requirejsCssData.usedBy.css=!0:global._requirejsCssData={usedBy:{css:!0},css:""};if(v.buildCSS!=0){var u=y[t];v.writeCSSModule&&u?(m&&(m=!1,r(l)),o='define(["@writecss"], function(writeCss){\n writeCss("'+s(n(u))+'");\n})'):o="define(function(){})",r.asModule(e+"!"+t,o)}},o.onLayerEnd=function(e,t){if(v.separateCSS&&v.IESelectorLimit)throw"RequireCSS: separateCSS option is not compatible with ensuring the IE selector limit";if(v.separateCSS){var r=t.path.replace(/(\.js)?$/,".css");console.log("Writing CSS! file: "+r+"\n");var o=g.join("");process.nextTick(function(){global._requirejsCssData&&(o=global._requirejsCssData.css=o+global._requirejsCssData.css,delete global._requirejsCssData.usedBy.css,Object.keys(global._requirejsCssData.usedBy).length===0&&delete global._requirejsCssData),i(r,n(o))})}else if(v.buildCSS!=0&&v.writeCSSModule!=1){var u=v.IESelectorLimit?g:[g.join("")];for(var a=0;a<u.length;a++){if(u[a]=="")return;e("(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('"+s(n(u[a]))+"');\n")}}g=[],m=!0},o});